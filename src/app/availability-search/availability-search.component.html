<app-loader [show]="IsLoad"></app-loader>
<!--BEGIN PAGE WRAPPER-->
<div id="page-wrapper">
    <!--BEGIN TITLE & BREADCRUMB PAGE-->
    <div id="title-breadcrumb-option-demo" class="page-title-breadcrumb">
        <div class="page-header pull-left">
            <div class="page-title">Availability</div>
        </div>
        <div class="clearfix"></div>
    </div>
    <!--END TITLE & BREADCRUMB PAGE-->
    <!--BEGIN CONTENT-->
    <div class="page-content">
        <form #empf="ngForm">
            <div class="panel">
                <div class="panel-body">
                    <div class="row mtm">
                        <div class="col-sm-3 col-xs-12">
                            <div class="form-group">
                                <label class="control-label">Case</label>
                                <select
                                class="form-control"
                                #caseId="ngModel"
                                id="ddlcaseId"
                                name="caseId"  
                                [(ngModel)]="searchModel.caseId"                                       
                              >
                              <option value="-1" disabled>Select</option>
                                 <option
                                  *ngFor="let obj of caseList"
                                  [value]="obj.itemId"
                                >
                                  {{ obj.itemName }}
                                </option> 
                              </select>
                              <em *ngIf="caseId.invalid && (caseId.dirty || caseId.touched)" for="ddlcaseId" class="invalid">This field is required</em>
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="form-group">
                                <label class="control-label">Term</label>
                                <input required type="text" placeholder="Term" class="form-control" id="txtterm" name="term" #term="ngModel" [(ngModel)]="searchModel.term">
                                
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="form-group">
                                <label class="control-label"> &nbsp;</label>
                                <input type="text" placeholder="Pay Type" class="form-control" id="txtpayType" name="payType" #payType="ngModel" [(ngModel)]="searchModel.payTypeId">
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-12">
                            <div class="form-group">
                                <label class="control-label">Employee Type</label>
                                <select required class="form-control" id="ddlempType" name="empType" #empType="ngModel" [(ngModel)]="searchModel.empTypeId">
                                    <option value="0" >All</option>                                   
                                    <option *ngFor="let obj of empTypeList"
                                            [value]="obj.itemId">
                                        {{ obj.itemName }}
                                    </option>
                                </select>
                                <em *ngIf="empType.invalid && (empType.dirty || empType.touched)" for="ddlempType" class="invalid">This field is required</em>
                            </div>
                        </div>
                    </div>
                    <div class="row mtm">

                        <div class="col-sm-3 col-xs-6">
                            <div class="form-group">

                                <label class="control-label">From Date</label>
                                <div class="input-icon right"><i class="fa fa-calendar"></i>
                                <input type="text"
                                  #MeetingDate="ngModel"
                                  id="txtMeetingDate"
                                  name="MeetingDate"
                                  placeholder="Meeting Date"
                                  [(ngModel)]="_fromDate"
                                  class="form-control"
                                  bsDatepicker    [bsConfig]="{ dateInputFormat: 'DD MMM YYYY' }" >
                            </div>
                        </div>
                            <!-- {{_meetingDate}} -->
                        </div>
                              

                        <div class="col-sm-3 col-xs-6">
                            <div class="form-group">

                                <label class="control-label">To Date</label>
                      <div class="input-icon right"><i class="fa fa-calendar"></i>
                                <input type="text"
                                  #MeetingDate="ngModel"
                                  id="txtMeetingDate"
                                  name="MeetingDate"
                                  placeholder="Meeting Date"
                                  [(ngModel)]="_toDate"
                                  class="form-control"
                                  bsDatepicker    [bsConfig]="{ dateInputFormat: 'DD MMM YYYY' }" >
                            </div>
                        </div>
                            <!-- {{_meetingDate}} -->
                        </div>
                              

                        <div class="col-sm-3 col-xs-6">
                            <div class="form-group">
                                <label class="control-label">Time In</label>
                                <timepicker #StartTime="ngModel" id="txtStartTime" name="StartTime" [(ngModel)]="_startTime" ></timepicker>
                                <!-- <input required type="text" placeholder="Time In" class="form-control" id="txttimeIn" name="timeIn" #timeIn="ngModel" [(ngModel)]="searchModel.timeIn"> -->
                               <!-- <em *ngIf="timeIn.invalid && (timeIn.dirty || timeIn.touched)" for="txttimeIn" class="invalid">This field is required</em> -->
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="form-group">
                                <label class="control-label">Time Out</label>
                                <timepicker #EndTime="ngModel" id="txtEndTime" name="EndTime" [(ngModel)]="_endTime" ></timepicker>
                                <!-- <input required type="text" placeholder="Time Out" class="form-control" id="txttimeOut" name="timeOut" #timeOut="ngModel" [(ngModel)]="searchModel.timeOut">
                              <em *ngIf="timeOut.invalid && (timeOut.dirty || timeOut.touched)" for="txttimeOut" class="invalid">This field is required</em>  -->
                            </div>
                        </div>
                    </div>
                    <div class="row mtm">
                            <div class="col-sm-3 col-xs-6" *ngFor="let item of provisionsTypeList; let i = index">
                                <div class="form-group">
                                   

                                    <input type="checkbox"   class="mrm"  name="item[{{ i }}].itemId" >


                                    <label class="control-label"> {{ item.itemName }}</label>
                                </div>
                            </div>
                        </div>
                        <div class="row mtm">
                            <div class="col-sm-12 col-xs-12 text-center">
                                <button type="button"  [disabled]="empf.invalid" (click)="search()" class="btn btn-lg btn-dark mbn"><i class="fa fa-search"></i> Search</button>
                            </div>
                        </div>
                </div>
                <div class="panel-body">
                    <div class="row mtm">
                        <div class="col-sm-12">
                      <div class="table-responsive-max client-table" *ngIf="Isapiresponsereceived">
                                                <table class="table table-striped table-bordered table-hover mbn">
                                                    <thead>
                                                    <tr>
                                                        <th width="15%" valign="top" style="min-width: 150px">
                                                         
                                                           Employees</th>
                                                           <th width="5%" valign="top" style="min-width: 150px">
                                                         
                                                            Distance</th>
                                                        <th width="11%" valign="top">
                                                      
                                                              
                                                            <p class="mbn">Sun </p>
                                                            <span class="text-black small-txt">
                                                            {{monthList[weekList[1].getMonth()] }} {{ weekList[0].getDate() }}
                                                          </span>
                                                        
                                                      
                                                    
                                                    </th>
                                                        <th width="11%" valign="top"><p class="mbn">Mon</p>  <span class="text-black small-txt">{{monthList[weekList[1].getMonth()] }} {{ weekList[1].getDate()}} </span> </th>
                                                        <th width="11%" valign="top"><p class="mbn">Tue </p> <span class="text-black small-txt">{{monthList[weekList[2].getMonth()] }} {{ weekList[2].getDate() }}</span></th>
                                                        <th width="11%" valign="top"><p class="mbn">Wed </p> <span class="text-black small-txt">{{monthList[weekList[3].getMonth()] }} {{ weekList[3].getDate() }}</span></th>
                                                        <th width="11%" valign="top"><p class="mbn">Thu </p> <span class="text-black small-txt">{{monthList[weekList[4].getMonth()] }}{{ weekList[4].getDate() }}</span></th>
                                                        <th width="11%" valign="top"><p class="mbn">Fri </p> <span class="text-black small-txt">{{monthList[weekList[5].getMonth()] }} {{ weekList[5].getDate() }}</span></th>
                                                        <th width="11%" valign="top">
                                                     
                                                            
                                                            <p class="mbn">Sat </p> <span class="text-black small-txt">{{monthList[weekList[6].getMonth()] }} {{ weekList[6].getDate() }}</span>
                                                           
                                                        
                                                          </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                   <tr *ngFor="let client of availbilityList | paginate: { itemsPerPage: 5, currentPage: p, totalItems: totalItemsCount };let i = index"
                                                      >
                                                      <td valign="top" class="bg-white" style="min-width: 254px;">
                                                      <div class="client-list">
                                                        <ul>
                                                        <li>
                                                          <div class="row">
                                                          <div class="col-sm-5 col-xs-5"> 
                                                        
                                                            <a  [routerLink]="'/client/info/' + client.empId" title="INFO">
                                                              {{client.empName}}
                                                            </a> 
                    
                    
                                                      </div>
                                                            <div class="col-sm-5 col-xs-5">{{ client.empId }}</div>
                                                            <div class="col-sm-2 col-xs-2">
                                                              <i class="fa fa-calendar medium-txt text-orange"></i>
                                                            </div>
                                                          </div>
                                                          </li>											
                                                        </ul>
                                                        </div>
                                                      </td>
                                                      <td *ngFor="let week of currentweekarray" valign="top" class="client-td">
                                                        <div class="row mbs"  *ngFor="let mtmObj of client.meetingList">
                                                          <div class="col-sm-12"  *ngIf="(mtmObj.meetingDate   |  equateDate : week)==true">
                                                            <div class="client-box-green-dot"></div>
                                                            <div class="client-box">
                                                              <p class="mbx"><strong>{{ mtmObj.startTime.toString() + '-' + mtmObj.endTime.toString() }}</strong></p>
                                                              <p class="mbn">{{ mtmObj.clientName }}</p>
                                                          </div>
                                                          </div>
                    
                                                        </div>
                                                        
                                                      </td>
                                                  
                                                    </tr>
                                                
                                                   
                                                   
                                                
                                                    </tbody>
                                                </table>
                                      </div>
                          
                        </div>
                        <div class="col-sm-12">
                    
                          
                    
                          <pagination-controls  class="paginator mtm mbm text-right pull-right" (pageChange)="pageChanged($event)"></pagination-controls>
                         
                          </div>
                      </div>

                    </div>








            </div>
        </form>
    </div>
    <!--END CONTENT-->
</div>
<!--END PAGE WRAPPER-->