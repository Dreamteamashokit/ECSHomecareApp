<div class="row">
    <div class="col-lg-12">
        <h4 class="mtm mbm text-uppercase  text-orange"> <strong>Billing</strong> </h4>
    </div>
    <div class="col-sm-12 text-14">
        <a href="javascript:void(0)" (click)="openModal(editBilling)" class="btn btn-md btn-default"><i
                class="fa fa-plus-square text-orange"></i> Add Bill</a>
    </div>
</div>

<h3 style="color: #666; margin-bottom: 10px;font-weight: normal;">Active Authorizations</h3>
<div class="row mtm">

    <div class="col-sm-12">
        <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>From Date</th>
                        <th>To Date</th>
                        <th>Bill To</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-container *ngIf="activeClinetBills">
                        <tr *ngFor="let item of activeClinetBills">
                            <td>{{item?.fromDate | date  }}</td>
                            <td>{{item?.toDate | date}}</td>
    
                            <td>{{getPayerNmaeFromId(item.payerId )}}</td>
                            <!-- <td colspan="8" rowspan="3" style="vertical-align: top; ">
                                <table class="tblBillingByPeriodRead" border="0" cellpadding="0" cellspacing="0"
                                    style="width: 360px">
                                    <tbody>
                                        <tr>
                                            <td nowrap="nowrap" style="text-align: left; padding-left: 5px">
                                                Hourly
                                            </td>
                                            <td>Weekly</td>
                                            <td>Monthly</td>
                                            <td nowrap="nowrap">Entire Period</td>
                                        </tr>
                                        <tr>
                                            <td nowrap="nowrap" style="text-align: left; padding-left: 5px">
                                                Units Authorized
                                            </td>
                                            <td class="bold">placeholder</td>
                                            <td class="bold">placeholder</td>
                                            <td class="bold">placeholder</td>
                                        </tr>
                                        <tr>
                                            <td nowrap="nowrap" style="text-align: left; padding-left: 5px">
                                                Occurences Authorized
                                            </td>
                                            <td class="bold">placeholder</td>
                                            <td class="bold">placeholder</td>
                                            <td class="bold">placeholder</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td> -->
    
                            <td colspan="2">
                                <button class="btn btn-primary" (click)="updateBilling(item.billingId,editBilling)">Edit</button>
                            </td>
                            <td><i class="fa fa-trash-o text-red medium-txt pts"
                                (click)="deleteBillingData(item.billingId)"></i></td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>
        </div>
    </div>
</div>

<h3 style="color: #666; margin-bottom: 10px;font-weight: normal;">Expired Authorizations</h3>
<div class="row mtm" *ngIf="true">
    <div class="col-sm-12">
        <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>From Date</th>
                        <th>To Date</th>
                        <th>Bill To</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-container *ngIf="expiredClientBills">
                        <tr *ngFor="let item of expiredClientBills">
                            <td>{{item?.fromDate | date  }}</td>
                            <td>{{item?.toDate | date}}</td>
    
                            <td>{{getPayerNmaeFromId(item.payerId )}}</td>
                            <!-- <td colspan="8" rowspan="3" style="vertical-align: top; ">
                                <table class="tblBillingByPeriodRead" border="0" cellpadding="0" cellspacing="0"
                                    style="width: 360px">
                                    <tbody>
                                        <tr>
                                            <td nowrap="nowrap" style="text-align: left; padding-left: 5px">
                                                Hourly
                                            </td>
                                            <td>Weekly</td>
                                            <td>Monthly</td>
                                            <td nowrap="nowrap">Entire Period</td>
                                        </tr>
                                        <tr>
                                            <td nowrap="nowrap" style="text-align: left; padding-left: 5px">
                                                Units Authorized
                                            </td>
                                            <td class="bold">placeholder</td>
                                            <td class="bold">placeholder</td>
                                            <td class="bold">placeholder</td>
                                        </tr>
                                        <tr>
                                            <td nowrap="nowrap" style="text-align: left; padding-left: 5px">
                                                Occurences Authorized
                                            </td>
                                            <td class="bold">placeholder</td>
                                            <td class="bold">placeholder</td>
                                            <td class="bold">placeholder</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td> -->
    
                            <td colspan="2">
                                <button class="btn btn-primary" (click)="updateBilling(item.billingId,editBilling)">Edit</button>
                            </td>
                            <td><i class="fa fa-trash-o text-red medium-txt pts"
                                (click)="deleteBillingData(item.billingId)"></i></td>
                        </tr>
                    </ng-container>
                    
                </tbody>
            </table>
        </div>
    </div>
</div>

<ng-template #editBilling>
    <div class="modal-header">
        <h4 *ngIf="isAddVisible" class="modal-title pull-left text-orange">Add Bill</h4>
        <h4 *ngIf="isUpdateVisible" class="modal-title pull-left text-orange">Edit Bill</h4>
        <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="decline();">
            <span aria-hidden="true" class="visually-hidden">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form name="frmclientbill" #f="ngForm" (ngSubmit)="onClickSubmit()" >
            <div class="row">
                <div class="col-lg-4">
                    <div class="form-group">
                        <label class="control-label">Bill To:</label>
                        <!-- <div class="input-icon right"><i class="fa fa-calendar"></i>
                            <input type="text" id="txtBillTo" name="BillTo" [(ngModel)]="model.billTo"
                                class="form-control" bsDatepicker [bsConfig]="{ dateInputFormat: 'MM/DD/YYYY' }">
                        </div> -->

                        <select class="form-control"  id="payer" name="payerid" #payer="ngModel" required  [(ngModel)]="model.payerId"
                        (change)="getNewServiceCode()"
                        >
                            <!-- <option value="-1" disabled>Select</option> -->
                            <!-- <option *ngFor="let note of noteTypeList" [value]="note.itemId">
                                    {{ note.itemName }}
                                </option> -->
                            <!-- <option>Private Pay</option>
                            <option>Well Care</option> -->
                            <option value="-1" disabled>Select Payer</option>
                            <option *ngFor="let payer of payerItemList" [value]="payer.itemId">
                                {{ payer.itemName }}
                            </option>
                        </select>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="form-group">
                        <label class="control-label">Contract Client ID:</label>
                        <input type="text" name="contractClientId" [(ngModel)]="model.contractClientId"
                            class="form-control">
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="form-group">
                        <label class="control-label">Authorization Number:</label>
                        <input type="text" name="authorizationNumber" [(ngModel)]="model.authorizationNumber"
                            class="form-control">
                    </div>
                </div>
            </div>

            <div class="row">

                <div class="col-lg-4">
                    <div class="form-group">
                        <label class="control-label">From Date:</label>
                        <div class="input-icon right"><i class="fa fa-calendar" (click)="fromDate.toggle()"></i>
                            <input type="text" id="txtFromDateTime" name="fromDate" [(ngModel)]="model.fromDate"
                                class="form-control"  #fromDate="bsDatepicker" bsDatepicker [bsConfig]="{ dateInputFormat: 'MM-DD-YYYY' }">
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="form-group">
                        <label class="control-label">To Date:</label>
                        <div class="input-icon right"><i class="fa fa-calendar" (click)="toDate.toggle()"></i>
                            <input type="text" id="txtToDateTime" name="toDate" [(ngModel)]="model.toDate"
                                class="form-control" #toDate="bsDatepicker" bsDatepicker [bsConfig]="{ dateInputFormat: 'MM-DD-YYYY' }">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="container">
                    <a href="javascript:void(0)" (click)="toggleForm()">{{ byDaysOfWeekToggle ? "By Period/Episode" : "By Days of Week"}}</a>
                </div>
               
            </div>

            <ng-container *ngIf="byDaysOfWeekToggle">
                <div class="row">
                    <hr>
                    <p class="col-lg-4">By Period/Episode</p>
                    <div class="col-sm-12">
                        <table border="0" cellpadding="3" cellspacing="3">
                            <tbody>
                                <tr>
                                    <td nowrap="nowrap"></td>
                                    <td class="control-label" style="padding-left: 10px">Per Week</td>
                                    <td class="control-label" style="padding-left: 10px">Per Months</td>
                                    <td class="control-label" style="padding-left: 10px">Entire Period</td>
                                    <td class="control-label" style="padding-left: 10px">Service Code</td>
                                </tr>
                                <tr>
                                    <td nowrap="nowrap" class="control-label">Units Authorized</td>
                                    <td style="padding-left: 5px">
                                        <input type="text"
                                            style="width: 50px; text-align: center; padding-left: 7px"
                                            class="form-control" 
                                            id="hoursAuthorizedPerWeek"
                                            name="hoursAuthorizedPerWeek"
                                            [(ngModel)]="model.hoursAuthorizedPerWeek"
                                            >
                                        </td>
                                    <td style="padding-left: 5px">
                                        <input type="text"
                                        style="width: 50px; text-align: center; padding-left: 7px"
                                        class="form-control" 
                                        id="hoursAuthorizedPerMonth"
                                        name="hoursAuthorizedPerMonth"
                                        [(ngModel)]="model.hoursAuthorizedPerMonth"
                                        >
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input type="text"
                                        style="width: 50px; text-align: center; padding-left: 7px"
                                        class="form-control" 
                                        id="hoursAuthorizedEntirePeriod"
                                        name="hoursAuthorizedEntirePeriod"
                                        [(ngModel)]="model.hoursAuthorizedEntirePeriod"
                                        >
                                        </td>
                                    <td style="padding-left: 5px">
                                        <select style="width: 120px; text-align: center; padding-left: 15px"
                                            class="form-control" 
                                            id="serviceCode" 
                                            name="serviceCode"
                                            [(ngModel)]="model.serviceCode"
                                            >
                                            <option value="-1" disabled>Select</option>
                                            <!-- <option *ngFor="let note of noteTypeList" [value]="note.itemId">
                                            {{ note.itemName }}
                                        </option> -->
                                            <!-- <option>Private Pay</option>
                                            <option>Well Care</option> -->
                                            <option *ngFor="let service of serviceCode" [value]="service.rateId">
                                                {{ service.serviceCode }}
                                            </option>
                                        </select>
                                    </td>
                                </tr>
                                <br>
                                <tr>
                                    <td nowrap="nowrap" class="control-label">Occurances Authorized</td>
                                    <td style="padding-left: 5px">
                                        <input 
                                        type="text"
                                        style="width: 50px; text-align: center;" class="form-control"
                                        id="occurencesAuthorizedPerWeek" 
                                        name="occurencesAuthorizedPerWeek"
                                        [(ngModel)]="model.occurencesAuthorizedPerWeek"
                                        >
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input 
                                        type="text"
                                        style="width: 50px; text-align: center;" class="form-control"
                                        id="occurencesAuthorizedPerMonth" 
                                        name="occurencesAuthorizedPerMonth"
                                        [(ngModel)]="model.occurencesAuthorizedPerMonth"
                                        >
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input 
                                        type="text"
                                        style="width: 50px; text-align: center;" class="form-control"
                                        id="occurencesAuthorizedEntirePeriod" 
                                        name="occurencesAuthorizedEntirePeriod"
                                        [(ngModel)]="model.occurencesAuthorizedEntirePeriod"
                                        >
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="container">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="control-label">Notes</label>
                                <textarea rows="2" #periodEpisode_Notes="ngModel" id="periodEpisode_Notes" name="periodEpisode_Notes" [(ngModel)]="model.periodEpisode_Notes"
                                    class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="!byDaysOfWeekToggle">
                <div class="row">
                    <hr>
                    <p class="col-lg-4">By Days of Week</p>
                    <div class="col-sm-12">
                        <table border="0" cellpadding="7" cellspacing="7">
                            <tbody>
                                <tr>
                                    <td nowrap="nowrap"></td>
                                    <td class="control-label" style="padding-left: 5px">Sat</td>
                                    <td class="control-label" style="padding-left: 5px">Sun</td>
                                    <td class="control-label" style="padding-left: 5px">Mon</td>
                                    <td class="control-label" style="padding-left: 5px">Tue</td>
                                    <td class="control-label" style="padding-left: 5px">Wed</td>
                                    <td class="control-label" style="padding-left: 5px">THU</td>
                                    <td class="control-label" style="padding-left: 5px">FRI</td>
                                </tr>
                                <tr>
                                    <td nowrap="nowrap" class="control-label">Billing Rate / Service Code</td>
                                    <td style="padding-left: 5px">
                                        <select style="width:50px; text-align: center; padding-left: 15px"
                                            class="form-control" 
                                            id="brServiceCode_SAT" 
                                            name="brServiceCode_SAT"
                                            [(ngModel)]="model.brServiceCode_SAT"
                                            >
                                            <option value="-1" disabled>Select</option>
                                            <!-- <option *ngFor="let note of noteTypeList" [value]="note.itemId">
                                                {{ note.itemName }}
                                            </option> -->
                                            <!-- <option>Private Pay</option>
                                            <option>Well Care</option> -->
                                            <option *ngFor="let service of serviceCode" [value]="service.rateId">
                                                {{ service.serviceCode }}
                                            </option>
                                        </select>
                                    </td>
                                    <td style="padding-left: 5px">
                                        <select style="width:50px; text-align: center; padding-left: 15px"
                                            class="form-control"
                                            id="brServiceCode_SUN" 
                                            name="brServiceCode_SUN"
                                            [(ngModel)]="model.brServiceCode_SUN"
                                            >
                                            <option value="-1" disabled>Select</option>
                                            <!-- <option *ngFor="let note of noteTypeList" [value]="note.itemId">
                                                {{ note.itemName }}
                                            </option> -->
                                            <!-- <option>Private Pay</option>
                                            <option>Well Care</option> -->
                                            <option *ngFor="let service of serviceCode" [value]="service.rateId">
                                                {{ service.serviceCode }}
                                            </option>
                                        </select>
                                    </td>
                                    <td style="padding-left: 5px">
                                        <select style="width:50px; text-align: center; " class="form-control"
                                        id="brServiceCode_MON" 
                                        name="brServiceCode_MON"
                                        [(ngModel)]="model.brServiceCode_MON">
                                            <option value="-1" disabled>Select</option>
                                            <option *ngFor="let service of serviceCode" [value]="service.rateId">
                                                {{ service.serviceCode }}
                                            </option>
                                        </select>
                                    </td>
                                    <td style="padding-left: 5px">
                                        <select style="width:50px; text-align: center;" class="form-control"
                                        id="brServiceCode_TUE" 
                                        name="brServiceCode_TUE"
                                        [(ngModel)]="model.brServiceCode_TUE">
                                            <option value="-1" disabled>Select</option>
                                            <option *ngFor="let service of serviceCode" [value]="service.rateId">
                                                {{ service.serviceCode }}
                                            </option>
                                        </select>
                                    </td>
                                    <td style="padding-left: 5px">
                                        <select style="width:50px; text-align: center; " class="form-control"
                                        id="brServiceCode_WED" 
                                        name="brServiceCode_WED"
                                        [(ngModel)]="model.brServiceCode_WED">
                                            <option value="-1" disabled>Select</option>
                                            <option *ngFor="let service of serviceCode" [value]="service.rateId">
                                                {{ service.serviceCode }}
                                            </option>
                                        </select>
                                    </td>
                                    <td style="padding-left: 5px">
                                        <select style="width:50px; text-align: center; " class="form-control"
                                        id="brServiceCode_THU" 
                                        name="brServiceCode_THU"
                                        [(ngModel)]="model.brServiceCode_THU">
                                            <option value="-1" disabled>Select</option>
                                            <option *ngFor="let service of serviceCode" [value]="service.rateId">
                                                {{ service.serviceCode }}
                                            </option>
                                        </select>
                                    </td>
                                    <td style="padding-left: 5px">
                                        <select style="width:50px; text-align: center; " class="form-control"
                                        id="brServiceCode_FRI" 
                                        name="brServiceCode_FRI"
                                        [(ngModel)]="model.brServiceCode_FRI">
                                            <option value="-1" disabled>Select</option>
                                            <option *ngFor="let service of serviceCode" [value]="service.rateId">
                                                {{ service.serviceCode }}
                                            </option>
                                        </select>
                                    </td>
                                </tr>
                                <br>
                                <tr>
                                    <td nowrap="nowrap"></td>
                                    <td class="control-label" style="text-align: center;">H</td>
                                    <td class="control-label" style="text-align: center;">H</td>
                                    <td class="control-label" style="text-align: center;">H</td>
                                    <td class="control-label" style="text-align: center;">H</td>
                                    <td class="control-label" style="text-align: center;">H</td>
                                    <td class="control-label" style="text-align: center;">H</td>
                                    <td class="control-label" style="text-align: center;">H</td>
                                </tr>
                                <tr>
                                    <td nowrap="nowrap" class="control-label">Quantity</td>
                                    <td style="padding-left: 5px">
                                        <input type="text"  
                                        class="form-control"
                                        style="width: 40px; text-align: center;"
                                        id="quantity_SAT" 
                                        name="quantity_SAT"
                                        [(ngModel)]="model.quantity_SAT"
                                        >
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input type="text"  
                                        class="form-control"
                                        style="width: 40px; text-align: center;"
                                        id="quantity_SUN" 
                                        name="quantity_SUN"
                                        [(ngModel)]="model.quantity_SUN"
                                        >
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input type="text"  
                                        class="form-control"
                                        style="width: 40px; text-align: center;"
                                        id="quantity_MON" 
                                        name="quantity_MON"
                                        [(ngModel)]="model.quantity_MON"
                                        >
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input type="text"  
                                        class="form-control"
                                        style="width: 40px; text-align: center;"
                                        id="quantity_TUE" 
                                        name="quantity_TUE"
                                        [(ngModel)]="model.quantity_TUE"
                                        >
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input type="text"  
                                        class="form-control"
                                        style="width: 40px; text-align: center;"
                                        id="quantity_WED" 
                                        name="quantity_WED"
                                        [(ngModel)]="model.quantity_WED"
                                        >
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input type="text"  
                                        class="form-control"
                                        style="width: 40px; text-align: center;"
                                        id="quantity_THU" 
                                        name="quantity_THU"
                                        [(ngModel)]="model.quantity_THU"
                                        > 
                                    </td>
                                    <td style="padding-left: 5px">
                                        <input type="text"  
                                        class="form-control"
                                        style="width: 40px; text-align: center;"
                                        id="quantity_FRI" 
                                        name="quantity_FRI"
                                        [(ngModel)]="model.quantity_FRI"
                                        > 
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="container">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label class="control-label">Notes</label>
                                <textarea rows="2" #daysOfWeekNotes="ngModel" id="daysOfWeekNotes" name="daysOfWeekNotes" [(ngModel)]="model.daysOfWeekNotes"
                                    class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>

            <div class="row">
                <div class="col-lg-12 text-center" *ngIf="isAddVisible">
                    <button type="button" class="btn btn-md btn-dark" (click)="onClickSubmit()">Add</button>
                </div>
            </div>
            <div class="row" *ngIf="isUpdateVisible">
                <div class="col-lg-12 text-center">
                    <button type="button" class="btn btn-md btn-dark"  (click)="onClickUpdate()">Save Changes</button>
                </div>
            </div>
        </form>
    </div>
</ng-template>